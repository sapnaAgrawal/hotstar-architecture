<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotstar System Design Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .diagram-section {
            margin-bottom: 60px;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .diagram-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.15);
        }

        .section-title {
            font-size: 2.2em;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .diagram-container {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .explanation {
            background: linear-gradient(135deg, #667eea20, #764ba220);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .explanation h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .component {
            display: inline-block;
            padding: 12px 20px;
            margin: 8px;
            border-radius: 25px;
            font-weight: bold;
            text-align: center;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .component:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .client { background: linear-gradient(45deg, #ff6b6b, #ee5a24); color: white; }
        .load-balancer { background: linear-gradient(45deg, #4ecdc4, #44a08d); color: white; }
        .app-server { background: linear-gradient(45deg, #45b7d1, #96ceb4); color: white; }
        .database { background: linear-gradient(45deg, #f9ca24, #f0932b); color: white; }
        .cdn { background: linear-gradient(45deg, #eb4d4b, #6c5ce7); color: white; }
        .storage { background: linear-gradient(45deg, #a55eea, #26de81); color: white; }
        .monitoring { background: linear-gradient(45deg, #fd79a8, #fdcb6e); color: white; }
        .security { background: linear-gradient(45deg, #6c5ce7, #74b9ff); color: white; }

        .flow-arrow {
            display: inline-block;
            font-size: 24px;
            color: #3498db;
            margin: 0 15px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .architecture-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .process-flow {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            border: 2px dashed #3498db;
        }

        .step {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            text-align: center;
            min-width: 150px;
            position: relative;
            transition: all 0.3s ease;
        }

        .step:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .step-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background: #e74c3c;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .real-world-example {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #ff6b9d;
        }

        .real-world-example h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .metrics-box {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .metric {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .metric:hover {
            transform: scale(1.05);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .navigation {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-item {
            display: block;
            padding: 8px 15px;
            margin: 5px 0;
            text-decoration: none;
            color: #2c3e50;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .nav-item:hover {
            background: #3498db;
            color: white;
            transform: translateX(5px);
        }

        @media (max-width: 768px) {
            .navigation {
                display: none;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .section-title {
                font-size: 1.8em;
            }
            
            .process-flow {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Hotstar System Design Architecture</h1>
            <p>Comprehensive System Design with Real-World Implementation Examples</p>
        </div>

        <div class="navigation">
            <a href="#architecture" class="nav-item">üèóÔ∏è Architecture</a>
            <a href="#load-balancing" class="nav-item">‚öñÔ∏è Load Balancing</a>
            <a href="#database" class="nav-item">üóÑÔ∏è Database</a>
            <a href="#cdn" class="nav-item">üåê CDN</a>
            <a href="#video-encoding" class="nav-item">üé¨ Video Encoding</a>
            <a href="#hls-streaming" class="nav-item">üì∫ HLS Streaming</a>
            <a href="#auto-scaling" class="nav-item">üìà Auto Scaling</a>
            <a href="#security" class="nav-item">üîí Security</a>
            <a href="#cicd" class="nav-item">üîÑ CI/CD</a>
            <a href="#future" class="nav-item">üîÆ Future Tech</a>
        </div>

        <!-- High-Level Architecture -->
        <div id="architecture" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">üèóÔ∏è</div>
                High-Level System Architecture
            </div>
            
            <div class="diagram-container">
                <div class="architecture-grid">
                    <div class="component client">üì± Mobile Apps<br>iOS/Android</div>
                    <div class="component client">üíª Web Browser<br>React/Angular</div>
                    <div class="component client">üì∫ Smart TV Apps<br>Android TV/Fire TV</div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <span class="flow-arrow">‚¨áÔ∏è</span>
                </div>
                
                <div class="architecture-grid">
                    <div class="component load-balancer">‚öñÔ∏è Load Balancer<br>AWS ALB/Nginx</div>
                    <div class="component security">üõ°Ô∏è WAF & DDoS<br>CloudFlare/AWS Shield</div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <span class="flow-arrow">‚¨áÔ∏è</span>
                </div>
                
                <div class="architecture-grid">
                    <div class="component app-server">üñ•Ô∏è API Gateway<br>Spring Boot/Node.js</div>
                    <div class="component app-server">‚öôÔ∏è Microservices<br>User/Content/Payment</div>
                    <div class="component app-server">üîç Search Service<br>Elasticsearch</div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <span class="flow-arrow">‚¨áÔ∏è</span>
                </div>
                
                <div class="architecture-grid">
                    <div class="component database">üóÑÔ∏è SQL Database<br>MySQL/PostgreSQL</div>
                    <div class="component database">üìä NoSQL Database<br>MongoDB/Cassandra</div>
                    <div class="component storage">üíæ Object Storage<br>AWS S3/GCS</div>
                    <div class="component cdn">üåê CDN<br>CloudFront/Fastly</div>
                </div>
            </div>

            <div class="explanation">
                <h3>üéØ Architecture Overview</h3>
                <p><strong>Client Layer:</strong> Multiple client applications (mobile, web, smart TV) serve as entry points for users to access Hotstar content.</p>
                <p><strong>Load Balancing Layer:</strong> Distributes incoming requests across multiple servers to ensure optimal performance and prevent single points of failure.</p>
                <p><strong>Application Layer:</strong> Microservices architecture handles different functionalities like user management, content delivery, search, and payments.</p>
                <p><strong>Data Layer:</strong> Combination of SQL and NoSQL databases for different data types, with object storage for video content and CDN for global distribution.</p>
            </div>

            <div class="real-world-example">
                <h4>üåü Real-World Implementation</h4>
                <p><strong>Scale:</strong> Hotstar handles 300+ million users with peak traffic during live sports events reaching 25+ million concurrent viewers during IPL matches. The system processes over 1 billion API calls daily across 9 countries.</p>
            </div>

            <div class="metrics-box">
                <div class="metric">
                    <div class="metric-value">300M+</div>
                    <div class="metric-label">Monthly Active Users</div>
                </div>
                <div class="metric">
                    <div class="metric-value">25M+</div>
                    <div class="metric-label">Peak Concurrent Users</div>
                </div>
                <div class="metric">
                    <div class="metric-value">1B+</div>
                    <div class="metric-label">Daily API Calls</div>
                </div>
                <div class="metric">
                    <div class="metric-value">9</div>
                    <div class="metric-label">Countries Served</div>
                </div>
            </div>
        </div>

        <!-- Load Balancing -->
        <div id="load-balancing" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">‚öñÔ∏è</div>
                Load Balancing & Traffic Distribution
            </div>
            
            <div class="diagram-container">
                <div class="process-flow">
                    <div class="step">
                        <div class="step-number">1</div>
                        <strong>User Request</strong><br>
                        Mobile/Web Client
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">2</div>
                        <strong>DNS Resolution</strong><br>
                        Route53/CloudDNS
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">3</div>
                        <strong>Layer 7 LB</strong><br>
                        AWS ALB/HAProxy
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">4</div>
                        <strong>Health Check</strong><br>
                        Server Status
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">5</div>
                        <strong>Route to Server</strong><br>
                        Weighted Distribution
                    </div>
                </div>

                <div class="architecture-grid" style="margin-top: 30px;">
                    <div class="component app-server">üñ•Ô∏è App Server 1<br>Mumbai Region</div>
                    <div class="component app-server">üñ•Ô∏è App Server 2<br>Delhi Region</div>
                    <div class="component app-server">üñ•Ô∏è App Server 3<br>Bangalore Region</div>
                    <div class="component app-server">üñ•Ô∏è App Server 4<br>Chennai Region</div>
                </div>
            </div>

            <div class="explanation">
                <h3>‚ö° Load Balancing Strategy</h3>
                <p><strong>Geographic Distribution:</strong> Servers deployed across multiple regions in India and internationally to reduce latency.</p>
                <p><strong>Algorithm:</strong> Weighted round-robin with real-time health checks, considering server capacity and current load.</p>
                <p><strong>Session Affinity:</strong> Sticky sessions for user authentication while maintaining load distribution for content delivery.</p>
                <p><strong>Failover:</strong> Automatic failover to healthy servers within 30 seconds of detecting server issues.</p>
            </div>

            <div class="real-world-example">
                <h4>üèè IPL 2023 Case Study</h4>
                <p>During IPL 2023 final, Hotstar handled 25.3 million concurrent users with 99.99% uptime. Load balancers distributed traffic across 50+ server instances with automatic scaling triggered when CPU utilization exceeded 70%.</p>
            </div>
        </div>

        <!-- Database Architecture -->
        <div id="database" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">üóÑÔ∏è</div>
                Database Architecture & Data Management
            </div>
            
            <div class="diagram-container">
                <div class="architecture-grid">
                    <div style="text-align: center;">
                        <h4 style="color: #2c3e50; margin-bottom: 15px;">SQL Databases (ACID Compliance)</h4>
                        <div class="component database">üë§ User Data<br>MySQL Master</div>
                        <div class="component database">üí∞ Transactions<br>PostgreSQL</div>
                        <div class="component database">üìä Analytics<br>MySQL Read Replicas</div>
                    </div>
                    
                    <div style="text-align: center;">
                        <h4 style="color: #2c3e50; margin-bottom: 15px;">NoSQL Databases (High Performance)</h4>
                        <div class="component database">üé¨ Content Metadata<br>MongoDB</div>
                        <div class="component database">üì∫ User Sessions<br>Redis Cache</div>
                        <div class="component database">üîç Search Index<br>Elasticsearch</div>
                    </div>
                </div>

                <div style="margin: 30px 0; padding: 20px; background: #f1f2f6; border-radius: 15px;">
                    <h4 style="color: #2c3e50; text-align: center; margin-bottom: 20px;">Data Replication Strategy</h4>
                    <div class="process-flow">
                        <div class="step">
                            <strong>Master DB</strong><br>
                            Write Operations
                        </div>
                        <span class="flow-arrow">‚û°Ô∏è</span>
                        <div class="step">
                            <strong>Async Replication</strong><br>
                            Real-time Sync
                        </div>
                        <span class="flow-arrow">‚û°Ô∏è</span>
                        <div class="step">
                            <strong>Read Replicas</strong><br>
                            Multiple Regions
                        </div>
                        <span class="flow-arrow">‚û°Ô∏è</span>
                        <div class="step">
                            <strong>Load Distribution</strong><br>
                            Read Queries
                        </div>
                    </div>
                </div>
            </div>

            <div class="explanation">
                <h3>üíæ Database Strategy</h3>
                <p><strong>SQL Usage:</strong> User profiles, payment transactions, and subscription data requiring ACID properties and complex relationships.</p>
                <p><strong>NoSQL Usage:</strong> Content metadata, user session data, and real-time analytics requiring high performance and horizontal scaling.</p>
                <p><strong>Replication:</strong> Master-slave replication with 3+ read replicas per region, ensuring 99.9% data availability.</p>
                <p><strong>Sharding:</strong> User data sharded by geographic region and user ID ranges to optimize query performance.</p>
            </div>

            <div class="real-world-example">
                <h4>üìà Data Scale at Hotstar</h4>
                <p>Hotstar manages 100+ TB of user data, 500+ TB of content metadata, and processes 50+ million database transactions daily. The system maintains 5ms average query response time with 99.95% availability.</p>
            </div>
        </div>

        <!-- CDN Architecture -->
        <div id="cdn" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">üåê</div>
                Content Delivery Network (CDN)
            </div>
            
            <div class="diagram-container">
                <div class="process-flow">
                    <div class="step">
                        <div class="step-number">1</div>
                        <strong>User Request</strong><br>
                        Video Content
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">2</div>
                        <strong>Edge Server Check</strong><br>
                        Cache Hit/Miss
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">3</div>
                        <strong>Origin Server</strong><br>
                        If Cache Miss
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">4</div>
                        <strong>Content Delivery</strong><br>
                        Optimized Route
                    </div>
                </div>

                <div style="margin: 30px 0;">
                    <h4 style="color: #2c3e50; text-align: center; margin-bottom: 20px;">Global CDN Distribution</h4>
                    <div class="architecture-grid">
                        <div class="component cdn">üáÆüá≥ India<br>15 Edge Locations</div>
                        <div class="component cdn">üá∫üá∏ USA<br>8 Edge Locations</div>
                        <div class="component cdn">üá¨üáß UK<br>5 Edge Locations</div>
                        <div class="component cdn">üá∏üá¨ Singapore<br>6 Edge Locations</div>
                        <div class="component cdn">üá¶üá∫ Australia<br>4 Edge Locations</div>
                        <div class="component cdn">üá®üá¶ Canada<br>3 Edge Locations</div>
                    </div>
                </div>
            </div>

            <div class="explanation">
                <h3>üöÄ CDN Performance Optimization</h3>
                <p><strong>Cache Strategy:</strong> 90% cache hit ratio with intelligent prefetching of popular content based on viewing patterns.</p>
                <p><strong>Edge Computing:</strong> Video transcoding and image optimization performed at edge servers to reduce origin server load.</p>
                <p><strong>Geographic Routing:</strong> Anycast routing directs users to the nearest edge server, reducing latency by 60-80%.</p>
                <p><strong>Adaptive Caching:</strong> Dynamic TTL based on content popularity, with live sports cached for 30 seconds and movies for 24 hours.</p>
            </div>

            <div class="real-world-example">
                <h4>‚ö° Performance Metrics</h4>
                <p>Hotstar's CDN reduces video start time from 8 seconds to 2 seconds globally. During peak events, the CDN serves 95% of requests from edge cache, handling 50 Tbps of traffic with 99.99% availability.</p>
            </div>
        </div>

        <!-- Video Encoding -->
        <div id="video-encoding" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">üé¨</div>
                Video Encoding & Processing Pipeline
            </div>
            
            <div class="diagram-container">
                <div class="process-flow">
                    <div class="step">
                        <div class="step-number">1</div>
                        <strong>Video Upload</strong><br>
                        4K/HD Source
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">2</div>
                        <strong>Quality Analysis</strong><br>
                        AI-powered QC
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">3</div>
                        <strong>Multi-format Encoding</strong><br>
                        H.264/H.265/AV1
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">4</div>
                        <strong>Bitrate Variants</strong><br>
                        240p to 4K
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">5</div>
                        <strong>Storage & CDN</strong><br>
                        Global Distribution
                    </div>
                </div>

                <div style="margin: 30px 0;">
                    <h4 style="color: #2c3e50; text-align: center; margin-bottom: 20px;">Encoding Formats & Bitrates</h4>
                    <div class="architecture-grid">
                        <div class="component storage">üì± Mobile<br>240p-720p<br>0.5-2 Mbps</div>
                        <div class="component storage">üíª Desktop<br>480p-1080p<br>1-5 Mbps</div>
                        <div class="component storage">üì∫ Smart TV<br>720p-4K<br>3-25 Mbps</div>
                        <div class="component storage">üéÆ Gaming<br>1080p-4K<br>5-50 Mbps</div>
                    </div>
                </div>
            </div>

            <div class="explanation">
                <h3>üîß Encoding Technology</h3>
                <p><strong>Codec Strategy:</strong> H.264 for compatibility, H.265 for efficiency (40% size reduction), and AV1 for next-gen streaming.</p>
                <p><strong>Adaptive Encoding:</strong> AI-driven per-title encoding optimizes bitrate allocation based on content complexity.</p>
                <p><strong>Processing Speed:</strong> Parallel processing across 1000+ CPU cores enables real-time encoding for live events.</p>
                <p><strong>Quality Control:</strong> Automated VMAF scoring ensures consistent quality across all bitrate variants.</p>
            </div>

            <div class="real-world-example">
                <h4>üèè Live Sports Encoding</h4>
                <p>During IPL matches, Hotstar encodes live video in real-time across 12 quality levels simultaneously. The system processes 4K@60fps input and delivers sub-10 second latency to 25+ million concurrent viewers.</p>
            </div>
        </div>

        <!-- HLS Streaming -->
        <div id="hls-streaming" class="diagram-section">
            <div class="section-title">
                <div class="section-icon">üì∫</div>
                HLS (HTTP Live Streaming) Implementation
            </div>
            
            <div class="diagram-container">
                <div class="process-flow">
                    <div class="step">
                        <div class="step-number">1</div>
                        <strong>Video Source</strong><br>
                        Encoded Content
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">2</div>
                        <strong>Segmentation</strong><br>
                        6-second chunks
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">3</div>
                        <strong>Manifest Creation</strong><br>
                        M3U8 Playlists
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">4</div>
                        <strong>Adaptive Streaming</strong><br>
                        Bitrate Selection
                    </div>
                    <span class="flow-arrow">‚û°Ô∏è</span>
                    <div class="step">
                        <div class="step-number">5</div>
                        <strong>Client Playback</strong><br>
                        Seamless Experience
                    </div>
                </div>

                <div style="margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 15px;">
                    <h4 style="color: #2c3e50; text-align: center; margin-bottom: 20px;">Adaptive Bitrate Logic</h4>
                    <div class="process-flow">
                        <div class="step">
                            <strong>Network Monitor</strong><br>
                            Bandwidth Detection
                        </div>
                        <span class="flow-arrow">‚¨áÔ∏è</span>
                        <div class="step">
                            <strong>Buffer Analysis</strong>
</div>
</div>
</div>